var ng=angular.module("ngGridView",[]);ng.directive("gridView",["$compile",function(t){var e={restrict:"E",scope:{gvRows:"="},controller:"@",name:"gvController",link:function(e,n){function a(){function a(t,e){if(null==t)return"";try{var n=t.match(/\{\w+\}/g).sort().filter(function(t,e,n){return e==n.indexOf(t)}),a=t;return n.forEach(function(t){var n=r(t),i=new RegExp(t,"g");a=a.replace(i,null==e[n]?"":e[n])}),a}catch(i){return t}}function r(t){return t.substring(t.indexOf("{")+1,t.length-1)}function i(){n.find(".ng-grid-view").remove()}i();var l=$("<div class='ng-grid-view table-responsive'>"),o=$("<table class='table table-striped'>"),d=$("<thead>"),c=$("<tbody>"),s=[];n.find("columns").children().each(function(){var t=$("<th>"),e=$(this).prop("tagName").toLowerCase(),n={};switch(n.headerText=void 0==$(this).attr("header-text")?"":$(this).attr("header-text"),t.append(n.headerText),$(this).attr("header-align")&&t.css("text-align",$(this).attr("header-align")),e){case"column":n.dataField=$(this).attr("data-field"),n.text=$(this).attr("text"),n.nullText=$(this).attr("null-text"),n.counter=$(this).attr("counter"),n.columnAlign=$(this).attr("column-align"),n.type="column";break;case"templatecolumn":n.data=$(this).html(),n.type="template"}d.append(t),s.push(n)});for(var u=0;u<=e.gvRows.length-1;u++){var p=e.gvRows[u],g=$("<tr>");s.forEach(function(t){var e=$("<td>");if(t.columnAlign&&e.css("text-align",t.columnAlign),"column"==t.type)e.append(t.counter?u+1:t.dataField?null==p[t.dataField]?a(t.nullText,p):p[t.dataField]:t.text?a(t.text,p):"no data");else if("template"==t.type){var n=a(t.data,p);e.append(n)}g.append(e)}),c.append(g)}o.append(d),o.append(c),l.append(o);var h=angular.element(t(l)(e));n.append(h)}$(n).find("columns").css("display","none"),e.$watch("gvRows",function(t){t&&e.gvRows.length>0&&a()},!0)}};return e}]);